<div class="container-fluid bg-secondary-subtle vh-100">
  <div class="row">
    <div class="col-md-12 mt-4">
      <h1 class="text-center">Piezas de Lego</h1>
    </div>
  </div>
  <div class="row">
    <div class="d-flex justify-content-center col-md-12 mt-4">
      <button class="btn btn-success">Agregar Nueva Pieza</button>
    </div>
  </div>
  <div class="row justify-content-center gap-3">
    <div class="col-lg-3 col-md-4 mb-2 mt-4">
      <select class="form-select" (change)="getSelectedOption($event)">
        <option value="" selected>Buscar por...</option>
        <option *ngFor="let option of searchOptions" class="search-option">
          {{ option }}
        </option>
      </select>
    </div>
    <div class="col-lg-4 col-md-3 mb-2 mt-4 position-relative">
      <div class="search-by-container">
        <input
          #searchInput
          type="text"
          class="form-control"
          (input)="getResultOptions($event)"
        />
        <img
          _ngcontent-ng-c261296637=""
          src="https://img.icons8.com/ios/50/cancel.png"
          alt="cancel"
          class="cancel-icon"
          (click)="searchInput.value = ''"
        />
      </div>
      <div
        class="results-container"
        *ngIf="resultOptions.length > 0 && searchInput.value !== ''"
      >
        <div
          class="result"
          *ngFor="let result of resultOptions"
          (click)="getLegoPieces(result)"
        >
          <p class="fs-5">{{ result }}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="table-responsive mt-4" *ngIf="!isLoading && legoData.length > 0">
    <table class="table table-stripped">
      <thead>
        <tr>
          <th>Imagen Pieza</th>
          <th>Imagen Set</th>
          <th *ngFor="let header of searchOptions">{{ header }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let piece of legoData; let i = index">
          <td>
            <div class="image-cell">
              <img
                [src]="
                  imagesData.codeImage
                    ? imagesData.codeImage
                    : imagesData.codeImages[i]
                "
                alt=""
              />
            </div>
          </td>
          <td>
            <div class="image-cell">
              <img
                [src]="
                  imagesData.legoImage
                    ? imagesData.legoImage
                    : imagesData.legoImages[i]
                "
                alt=""
              />
            </div>
          </td>
          <td *ngFor="let column of searchOptions">
            {{ piece[column.toLowerCase()] }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="loader-container" *ngIf="isLoading">
    <div class="loader"></div>
  </div>
</div>
